(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(15),a=t.n(r),c=t(6),o=t(3),u=t(1),i=t(0),s=function(e){var n=e.person,t=e.removePerson;return Object(i.jsxs)("li",{children:[n.name," ",n.number," ",Object(i.jsx)("button",{onClick:t,children:"Remove"})]})},d=function(e){var n=e.persons,t=e.filterValue,r=e.deletePerson;return Object(i.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t)})).map((function(e){return Object(i.jsx)(s,{person:e,removePerson:function(){return r(e.id)}},e.name)}))})},l=function(e){var n=e.text;return Object(i.jsx)("h2",{children:n})},f=function(e){var n=e.text;return Object(i.jsx)("h1",{children:n})},j=function(e){var n=e.addPerson,t=e.newName,r=e.handleNewName,a=e.newNumber,c=e.handleNewNumber;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:r})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:a,onChange:c})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.message,t=e.type,r=void 0===t?"notification":t;return null===n?null:Object(i.jsx)("div",{className:r,children:n})},h=function(e){var n=e.filterValue,t=e.handleFilterNames;return Object(i.jsxs)("div",{children:["Filter shown with: ",Object(i.jsx)("input",{value:n,onChange:t})]})},m=t(4),O=t.n(m),p="/api/persons",v=function(){return O.a.get(p).then((function(e){return e.data}))},x=function(e){return O.a.post(p,e).then((function(e){return e.data}))},w=function(e,n){return O.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},N=function(e){return O.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))},g=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;e(n),setTimeout((function(){e(null)}),t)},y=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(u.useState)(""),s=Object(o.a)(a,2),m=s[0],O=s[1],p=Object(u.useState)(""),y=Object(o.a)(p,2),k=y[0],P=y[1],S=Object(u.useState)(""),C=Object(o.a)(S,2),V=C[0],D=C[1],E=Object(u.useState)(null),F=Object(o.a)(E,2),A=F[0],I=F[1],J=Object(u.useState)(null),T=Object(o.a)(J,2),B=T[0],L=T[1];Object(u.useEffect)((function(){v().then((function(e){r(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)(f,{text:"Phonebook"}),Object(i.jsx)(b,{message:A,type:"notification"}),Object(i.jsx)(b,{message:B,type:"error"}),Object(i.jsx)(h,{filterValue:V,handleFilterNames:function(e){D(e.target.value)}}),Object(i.jsx)(l,{text:"Add a New"}),Object(i.jsx)(j,{addPerson:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(m)){var n=t.filter((function(e){return e.name===m}))[0];return n.number===k?void alert("".concat(m," is already added to the phonebook")):void function(e){if(!1!==window.confirm("".concat(m," is already added to the phonebook, replace the old number?"))){var n=Object(c.a)(Object(c.a)({},e),{},{number:k});w(e.id,n).then((function(n){r(t.map((function(t){return t.id!==e.id?t:n}))),g(I,"Updated ".concat(e.name),3e3)})).catch((function(n){g(L,"Information of ".concat(e.name," has already been removed from the server"),5e3)}))}}(n)}if(""!==m&&""!==k){var a={name:m,number:k};x(a).then((function(e){r(t.concat(e)),O(""),P(""),D(""),g(I,"Added ".concat(a.name),3e3)}))}else alert("Expected a pair of a person's name and their phone number while only one of those were found.")},newName:m,handleNewName:function(e){O(e.target.value)},newNumber:k,handleNewNumber:function(e){P(e.target.value)}}),Object(i.jsx)(l,{text:"Numbers"}),Object(i.jsx)(d,{persons:t,filterValue:V,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));!1!==window.confirm("Delete ".concat(n.name,"?"))&&(t.map((function(e){return e.name})).includes(n.name)?N(e).then((function(a){r(t.filter((function(n){return n.id!==e}))),O(""),P(""),D(""),g(I,"Deleted ".concat(n.name),3e3)})).catch((function(t){alert("The person '".concat(n.name,"' was already deleted from the server.")),r((function(n){return n.id!==e}))})):alert("".concat(m," is not a part of the phonebook")))}})]})};t(39);a.a.render(Object(i.jsx)(y,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.3e26d211.chunk.js.map