(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(15),a=t.n(r),o=t(6),c=t(3),i=t(1),u=t(0),s=function(e){var n=e.person,t=e.removePerson;return Object(u.jsxs)("li",{children:[n.name," ",n.number," ",Object(u.jsx)("button",{onClick:t,children:"Remove"})]})},d=function(e){var n=e.persons,t=e.filterValue,r=e.deletePerson;return Object(u.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t)})).map((function(e){return Object(u.jsx)(s,{person:e,removePerson:function(){return r(e.id)}},e.name)}))})},l=function(e){var n=e.text;return Object(u.jsx)("h2",{children:n})},f=function(e){var n=e.text;return Object(u.jsx)("h1",{children:n})},b=function(e){var n=e.addPerson,t=e.newName,r=e.handleNewName,a=e.newNumber,o=e.handleNewNumber;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:r})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:a,onChange:o})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var n=e.message,t=e.type,r=void 0===t?"notification":t;return null===n?null:Object(u.jsx)("div",{className:r,children:n})},h=function(e){var n=e.filterValue,t=e.handleFilterNames;return Object(u.jsxs)("div",{children:["Filter shown with: ",Object(u.jsx)("input",{value:n,onChange:t})]})},m=t(4),p=t.n(m),O="/api/persons",v=function(){return p.a.get(O).then((function(e){return e.data}))},x=function(e){return p.a.post(O,e).then((function(e){return e.data}))},w=function(e,n){return p.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},N=function(e){return p.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},g=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;e(n),setTimeout((function(){e(null)}),t)},y=function(){var e=Object(i.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],a=Object(i.useState)(""),s=Object(c.a)(a,2),m=s[0],p=s[1],O=Object(i.useState)(""),y=Object(c.a)(O,2),k=y[0],P=y[1],S=Object(i.useState)(""),C=Object(c.a)(S,2),V=C[0],D=C[1],E=Object(i.useState)(null),F=Object(c.a)(E,2),A=F[0],I=F[1],J=Object(i.useState)(null),T=Object(c.a)(J,2),B=T[0],L=T[1];Object(i.useEffect)((function(){v().then((function(e){r(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)(f,{text:"Phonebook"}),Object(u.jsx)(j,{message:A,type:"notification"}),Object(u.jsx)(j,{message:B,type:"error"}),Object(u.jsx)(h,{filterValue:V,handleFilterNames:function(e){D(e.target.value)}}),Object(u.jsx)(l,{text:"Add a New"}),Object(u.jsx)(b,{addPerson:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(m)){var n=t.filter((function(e){return e.name===m}))[0];return n.number===k?void alert("".concat(m," is already added to the phonebook with the same number.")):void function(e){if(!1!==window.confirm("".concat(m," is already added to the phonebook, replace the old number?")))if(""!==k){var n=Object(o.a)(Object(o.a)({},e),{},{number:k});w(e.id,n).then((function(n){r(t.map((function(t){return t.id!==e.id?t:n}))),g(I,"Updated ".concat(e.name),3e3)})).catch((function(n){n.response.data.error.includes("validation failed")?g(L,"".concat(n.response.data.error),5e3):g(L,"Information of ".concat(e.name," has already been removed from the server"),5e3)}))}else g(L,"Phone number is missing.",5e3)}(n)}if(""!==m&&""!==k){var a={name:m,number:k};x(a).then((function(e){r(t.concat(e)),p(""),P(""),D(""),g(I,"Added ".concat(a.name),3e3)})).catch((function(e){console.log(e.response.data.error),g(L,"".concat(e.response.data.error),5e3)}))}else alert("Expected a pair of a person's name and their phone number while only one of those were found.")},newName:m,handleNewName:function(e){p(e.target.value)},newNumber:k,handleNewNumber:function(e){P(e.target.value)}}),Object(u.jsx)(l,{text:"Numbers"}),Object(u.jsx)(d,{persons:t,filterValue:V,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));!1!==window.confirm("Delete ".concat(n.name,"?"))&&(t.map((function(e){return e.name})).includes(n.name)?N(e).then((function(a){r(t.filter((function(n){return n.id!==e}))),p(""),P(""),D(""),g(I,"Deleted ".concat(n.name),3e3)})).catch((function(t){alert("The person '".concat(n.name,"' was already deleted from the server.")),r((function(n){return n.id!==e}))})):alert("".concat(m," is not a part of the phonebook")))}})]})};t(39);a.a.render(Object(u.jsx)(y,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.9078d90a.chunk.js.map